# This is a basic workflow to help you get started with Actions

name: CI

# Controls when the workflow will run
on:
  # Triggers the workflow on push or pull request events but only for the "master" branch
  push:
    branches: [ "master" ]
  pull_request:
    branches: [ "master" ]

  # Allows you to run this workflow manually from the Actions tab
  workflow_dispatch:

# A workflow run is made up of one or more jobs that can run sequentially or in parallel
jobs:
  build-and-deploy:
    runs-on: ubuntu-latest

    steps:
    - name: Checkout repository
      uses: actions/checkout@v4

    - name: Download and Extract Tarot Data
      run: |
        # リリースアセットのダウンロード
        # GitHub CLI を使用する場合 (事前に gh-cli をインストールする必要があるか、適切なアクションを探す)
        # あるいは直接 curl/wget でダウンロード
        curl -L https://github.com/JRF-2018/youscout/releases/download/v0.30/jrf_tarot-20140118.zip -o jrf_tarot.zip
        
        # zip ファイルの展開
        unzip jrf_tarot.zip -d . # 現在のディレクトリに展開
        # もし特定のディレクトリ（例: tarot_data/）に展開したい場合は以下のように変更
        # mkdir tarot_data
        # unzip jrf_tarot.zip -d tarot_data/

    - name: Setup Pages
      uses: actions/configure-pages@v5

    - name: Upload artifact
      uses: actions/upload-pages-artifact@v4
      with:
        # GitHub Pages に公開したいファイルやディレクトリを指定
        # これらは GitHub Pages が公開するブランチ（通常 gh-pages）のルートに配置されます
        path: |
          ./*.html
          ./*.txt
          ./simplest # simplest ディレクトリ全体
          ./jrf_tarot # 展開されたタロットデータのディレクトリ名 (zipの内容による)
          # ↑ ここはzipを展開した結果のディレクトリ名に合わせる必要があります
          # 例えば、zipを解凍したら 'jrf_tarot-20140118/' というディレクトリができて、その中にデータがある場合

    - name: Deploy to GitHub Pages
      id: deployment
      uses: actions/deploy-pages@v4
