name: Deploy to GitHub Pages

on:
  push:
    branches:
      - master # master ブランチへのプッシュでトリガー

jobs:
  build-and-deploy:
    runs-on: ubuntu-latest

    steps:
    - name: Checkout repository
      uses: actions/checkout@v4

    - name: Download and Extract Tarot Data
      run: |
        curl -L https://github.com/JRF-2018/youscout/releases/download/v0.30/jrf_tarot-20140118.zip -o jrf_tarot.zip
        unzip jrf_tarot.zip -d .

    - name: Prepare Pages Content
      run: |
        # GitHub Pages に公開したいファイルを、一時的なディレクトリに集める
        # この例では 'public' ディレクトリを作成
        mkdir public
        cp *.html public/
        cp *.txt public/
        cp -r simplest public/
        cp -r jrf_tarot public/ # 展開されたタロットデータのディレクトリ名に合わせる

    - name: Setup Pages
      uses: actions/configure-pages@v5

    - name: Upload artifact for Pages
      uses: actions/upload-pages-artifact@v4
      with:
        path: './public' # ここで、準備したディレクトリを指定する

    - name: Deploy to GitHub Pages
      id: deployment
      uses: actions/deploy-pages@v4
